I"{<p><em>Please view all demostrations as educaitonal and for learning purposes ONLY. Use of these examples aginst targets in the real world without permission is unethical and illegal</em></p>

<h2 id="basic-pentesting-1-csec">Basic pentesting 1 (CSEC)</h2>

<p><em>CSEC is a vulnerable machine located on vulnhub. https://www.vulnhub.com/entry/basic-pentesting-1,216/
Many thanks to Josiah Pierce</em></p>

<p><img src="images/nmap.PNG" alt="" /></p>

<p>I started with a port and version scan using nmap. As we can see it reveiled several regularly used ports.</p>
<ul>
  <li>port 21 - ftp</li>
  <li>port 22 - ssh</li>
  <li>port 80 - http</li>
</ul>

<p>With the service versions that were returned by nmap I employed searchsploit to see if there was any low hanging fruit, begining with FTP.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>searchsploit proftpd-1.3.3c
</code></pre></div></div>
<p>What came back was a Metasploit module for backdoor command execution.
Booting up Metasploit I ran a search command for the module, assigned it for use, and set the paramaters.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>msf5 &gt; search proftpd
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use unix/ftp/proftdp_133c_backdoor
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set RHOSTS &lt;ip&gt;
</code></pre></div></div>
<p>I used the <span style="color: red;">show missing</span> command to see if I had overlooked any options for the exploit, and when I was absolutly sure everything was correct, typed <span style="color: red;">run</span> and initiated my attack.</p>

<p><img src="images/whoami.PNG" alt="" /></p>

<p>The reverse tcp shell was successful. After issueing a <span style="color: red;">whoami</span> command and watching <span style="color: red;">root</span> return it was time to see what other avenues I could find.</p>

<p>With my backdoor already in place I decided to pull the hashed passwords and try to crack them offline. I ran a <span style="color: red;">cat</span> command on both <span style="color: red;">/etc/shadow</span> and <span style="color: red;">/etc/passwd</span> and copied the output back to .txt files on my attcking machine named shadow.txt and passwd.txt respectivly.</p>

<p><img src="images/etc-passwd.PNG" alt="" /></p>

<p>Back on my machine in a terminal window I used the <span style="color: red;">unshadow</span> command on the passwd.txt and shadow.txt files. This created a file named jtr-hash.txt formated for John the Ripper, the password cracking utility. Next I ran the commands to start John and pointed it at my hashed file.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unshadow passwd.txt shadow.txt &gt; jtr-hash.txt
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>john jtr-hash.txt
</code></pre></div></div>
<p>It cracked the hash in a matter of minuetes. I ran the next command to display the user &amp; password for the hash file I had just cracked.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>john --show jtr-hash.txt
</code></pre></div></div>
<p><img src="images/john-crack.PNG" alt="" /></p>

<p>As we can see in the output the username and password were exactly the same. Sometimes its the simple things that can be the weakness. I may have been able to brute force SSH using the username alone and gotten access just the same!</p>

<p>Anyway now that I had credientals I shifted focus to the SSH service running.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh marlinspike@192.168.56.102
password:marlinspike
</code></pre></div></div>
<p>Of course it worked and as all hackers say…IM IN.</p>

<p>Because I found the default landing page for the HTTP service and out of curosity I started enumerating a few key directories to see what I could find.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cd /var/www/html
</code></pre></div></div>
<p>I found a directory named secret running a WordPress service!</p>

<p><img src="images/secret-dir.PNG" alt="" /></p>

<p>Now I wanted to check what port this ‘secret’ WordPress was running on.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -tupln | grep LISTEN
</code></pre></div></div>

<p><img src="images/netstat-wp.PNG" alt="" /></p>

<p>After determining it was running on the localhost I employed the use of a great enumeration tool for WordPress, <span style="color: red;">WPScan</span>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wpscan -e --url http://192.168.56.102/secret
</code></pre></div></div>

<p><a href="./">back</a></p>
:ET